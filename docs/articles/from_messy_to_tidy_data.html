<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reorganising disorganised messy data • rectifyr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Reorganising disorganised messy data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rectifyr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/from_messy_to_tidy_data.html">Reorganising disorganised messy data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Reorganising disorganised messy data</h1>
            
      
      
      <div class="hidden name"><code>from_messy_to_tidy_data.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Spreadsheets as places where data tables are recorded can be ridiculously messy. All thinkable arrangements of the data may be encountered, culminating in several non-uniformly formatted and non-systematically placed tables contained within one spreadsheet. In <code>arealDB</code> each of the individual tables within a spreadsheet is called <em>cluster</em>. A cluster is characterised by an origin, its upper left cell, and by a width and height.</p>
<p>A common best practice of building up data tables is that variables are recorded in columns and observations in rows, so that the data can be considered <em>tidy</em> <span class="citation">(Wickham <a href="#ref-Wickham2014">2014</a>)</span> and normalised at least to the third normal form <span class="citation">(Codd <a href="#ref-Codd1990">1990</a>)</span>. Tidy tables typically contain two kinds of variables</p>
<ol style="list-style-type: decimal">
<li>Variables that have been measured in some way and that consequently represent the values of that measurement, be they continuous or categorical (they are called <em>values variables</em> here).</li>
<li>Variables that identify the unit for which the values have been measured (they are called <em>identifying (or id) variables</em> here).</li>
</ol>
<p>These two variable types are the target variables in <code>arealDB</code>. The primary aim of reorganising messy tables lays in determining where those two kinds of variables are located in each cluster. In the context of areal data the variables <em>administrative territories</em> and the <em>period</em>, which identify observational units, make up the backbone of any database.</p>
<p>Some tables contain the names of values variables as another supposed identifying variable. Those are, however, not tidy tables because the name-bearing column is neither an identifying variable, nor a values variable. Such a table constitutes a "long" table that comprises a <em>key-values pair</em> (the column containing the supposed "identifier" and that containing the values this identifier refers to), which needs to be spread to a "wide" table (described in detail below).</p>
<p>The following sections each start with a description of the table that needs reshaping, followed by a brief description of how this table needs to be reshaped and the schema description that is used for the reorganisation. In the first section only the arrangement of clusters is discussed, while the following sections describe how the contents of each cluster can be re-arranged. This is definitely not an exhaustive list of possible table arrangements, but it should cover the most common cases and be extensible enough to capture many mutations of the presented tables. The final section contains a list of steps that should be taken one after the other to come up with a schema description.</p>
</div>
<div id="definitions" class="section level1">
<h1 class="hasAnchor">
<a href="#definitions" class="anchor"></a>Definitions</h1>
<p><em>table</em>: Typically a set of values, but since we also consider data arrangements here that can’t be regarded as topologically coherent “chunks” of data, we include in the definition of table also “spreadsheets” that may contain a very loose organisation of data.</p>
<p><em>long variables</em>: A variable that is arranged so that the name is at the top (the column name) and the values are aligned vertically below it.</p>
<p><em>wide variables</em>: A variable that is arranged so that its unique values (levels) are in seperate columns.</p>
<p><em>tidy variable</em>: see ‘long variable’.</p>
<p><em>tidy table</em>: A table that contains only tidy variables.</p>
<p><em>simple header</em>: A table header that is made up of only one row. This is in contrast to a header where several variables are somehow nested to imply some order of the variables.</p>
<p><em>cluster</em>: A coherent set of values in some sort “rectangular form” that does not have to be tidy and may still be disorganised.</p>
<p><em>key</em>: A variable that treats the name of several other variables as if they were values.</p>
<p><em>messy table</em>: A general term for tables that contain “non-tidy” data (has not been defined further).</p>
<p><em>disorganised (messy) table</em>: A table that contains any sort of non-tidy data, specifically emphasizing that those may also be tables that contain (messy) clusters or other forms of loosely organised data.</p>
</div>
<div id="table-types" class="section level1">
<h1 class="hasAnchor">
<a href="#table-types" class="anchor"></a>Table types</h1>
<div id="spreadsheet-contains-several-clusters" class="section level2">
<h2 class="hasAnchor">
<a href="#spreadsheet-contains-several-clusters" class="anchor"></a>Spreadsheet contains (several) clusters</h2>
<p>Clusters are often of the same arrangement within one spreadsheet, they can be repeated along rows (horizontally) or along columns (vertically). A table should be treated like a cluster also when the spreadsheet contains not only the table, but perhaps also text that may be scattered across the document and that does not allow the table to start at the spreadsheet origin in the topmost left cell.</p>
<p>To reorganise the data into tidy form, each cluster is "cut out", rearranged individually and appended to the end of an output table.</p>
<div id="horizontal-clusters" class="section level3">
<h3 class="hasAnchor">
<a href="#horizontal-clusters" class="anchor"></a>Horizontal clusters</h3>
<p>In case horizontal clusters are sitting right next to each other in the same origin row (Tab. 1), it is sufficient to provide the topmost row and all leftmost columns at which a new cluster starts. In case there is some arbitrary horizontal space between clusters, also the width (of each cluster) needs to be provided.</p>
<table class="table">
<caption>Table 1: Horizontal clusters of the identifying variable <code>period</code>.</caption>
<thead><tr class="header">
<th align="left">territories</th>
<th align="left">commodities</th>
<th align="left">harvested</th>
<th align="left">production</th>
<th align="left">commodities</th>
<th align="left">harvested</th>
<th align="left">production</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left">year 1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">year 2</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">soybean</td>
<td align="left">1111</td>
<td align="left">1112</td>
<td align="left">soybean</td>
<td align="left">1211</td>
<td align="left">1212</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">maize</td>
<td align="left">1121</td>
<td align="left">1122</td>
<td align="left">maize</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="even">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span> </a>
<a class="sourceLine" id="cb1-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="dv">1</span>, <span class="dt">left =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">5</span>), <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">            <span class="dt">id =</span> <span class="st">"period"</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">     <span class="dt">variables =</span> </a>
<a class="sourceLine" id="cb1-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span> </a>
<a class="sourceLine" id="cb1-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">            <span class="dt">period =</span> </a>
<a class="sourceLine" id="cb1-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"year"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">                   <span class="dt">row =</span> <span class="dv">1</span>, <span class="dt">col =</span> <span class="ot">NULL</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">            ...))</a></code></pre></div>
</div>
<div id="vertical-clusters" class="section level3">
<h3 class="hasAnchor">
<a href="#vertical-clusters" class="anchor"></a>Vertical clusters</h3>
<p>For vertically arranged clusters (Tab. 2), just like for the horizontal case, the respective rows, columns (and heights) need to be provided.</p>
<table class="table">
<caption>Table 2: Vertical clusters of the identifying variable <code>period</code>.</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">territories</th>
<th align="left">commodities</th>
<th align="left">harvested</th>
<th align="left">production</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">year 1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">soybean</td>
<td align="left">1111</td>
<td align="left">1112</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">maize</td>
<td align="left">1121</td>
<td align="left">1122</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">year 2</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">soybean</td>
<td align="left">1211</td>
<td align="left">1212</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">maize</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span> </a>
<a class="sourceLine" id="cb2-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, ...), <span class="dt">left =</span> <span class="dv">1</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">            <span class="dt">id =</span> <span class="st">"period"</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span> </a>
<a class="sourceLine" id="cb2-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">            <span class="dt">period =</span> </a>
<a class="sourceLine" id="cb2-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"year"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">            ...))</a></code></pre></div>
</div>
<div id="messy-clusters" class="section level3">
<h3 class="hasAnchor">
<a href="#messy-clusters" class="anchor"></a>Messy clusters</h3>
<p>In case several clusters are neither aligned along a row nor a column, and are all of differing size, the respective information need to be provided at the same index of the respective property. For example, three clusters, where the first cluster starts at (1,1) and is 3 by 4 cells in size, where the second clusters starts at (5,2) and is 5 by 5 cells in size, and so on, needs to be specified as below.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span> </a>
<a class="sourceLine" id="cb3-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">1</span>), <span class="dt">left =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>), </a>
<a class="sourceLine" id="cb3-3" data-line-number="3">            <span class="dt">width =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>), <span class="dt">height =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">            <span class="dt">id =</span> <span class="st">"period"</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span> </a>
<a class="sourceLine" id="cb3-7" data-line-number="7">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">            <span class="dt">period =</span> </a>
<a class="sourceLine" id="cb3-10" data-line-number="10">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"year"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">            ...))</a></code></pre></div>
<p>Additionally, given that at least the tables within each cluster are all arranged in the same way, the contained variables can be specified so that their row and column indices are given relative to the cluster position (<code>rel = TRUE</code>). If also that is not the case, the row and column values for each cluster need to be provided for the respective variables in the same way as for cluster positions.</p>
</div>
</div>
<div id="spreadsheet-contains-one-table" class="section level2">
<h2 class="hasAnchor">
<a href="#spreadsheet-contains-one-table" class="anchor"></a>Spreadsheet contains one table</h2>
<p>When a spreadsheet contains only one table we can still have disorganised messy data, for example when the variable names are not in a single row, or in other words, if the table header has more than one row. The names are in those cases arranged so that their order implies some sort of nesting of the variables.</p>
<p>In those tables we have to distinguish tables where the values variable are in seperate, tidy columns (<em>i.e, where the name is at the top of the column and the values are below that</em>) from such tables where the values variables are “long” (<em>i.e., the variable names are in a key and the values are in another column</em>).</p>
<p>In both cases we have a “tidy” basic form, where all identifying variables are in one column and several forms, where the identifying variables’ <em>values</em> are used to establish the above mentioned nested order (and where the names of those identifying variable are thus ommited).</p>
<ul>
<li>In case the values variables are in seperate columns we only have to gather potentially wide identifying variables into one column.</li>
<li>In case the values variables are listed, we first have to gather potentially wide identifying variables into one column and then have to spread out the listed value variable.</li>
</ul>
<div id="separate-values-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#separate-values-variables" class="anchor"></a>Separate values variables</h3>
<p>In case the target variables are arranged into individual columns (Tab. 3), we have tidy data <span class="citation">(Wickham <a href="#ref-Wickham2014">2014</a>)</span>, which are already in the correct arrangement of <code>arealDB</code>. The variables in a tidy table may however, still need different names, units and transformation factors.</p>
<table class="table">
<caption>Table 3: A tidy table.</caption>
<thead><tr class="header">
<th align="left">territories</th>
<th align="left">period</th>
<th align="left">commodities</th>
<th align="left">harvested</th>
<th align="left">production</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">soybean</td>
<td align="left">1111</td>
<td align="left">1112</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">maize</td>
<td align="left">1121</td>
<td align="left">1122</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">soybean</td>
<td align="left">1211</td>
<td align="left">1212</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">maize</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="ot">NULL</span>, <span class="dt">left =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">            <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">            <span class="dt">year =</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"period"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">            <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">3</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb4-14" data-line-number="14">            <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">4</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>),</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">            <span class="dt">production =</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">5</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb4-21" data-line-number="21">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>)))</a></code></pre></div>
<p>It may be the case that identifying variables are wide, one could say they are "nested". For both, nested identifying variables and nested values variables we have to record the row and the specific columns in which the variable names are found. Beware that in those case, the header is not simple (i.e., <em>not only in the first row</em>) and can thus not be considered (<code>header = FALSE</code>).</p>
<table class="table">
<caption>Table 4: The values variables are nested within the identifying variable <code>commodities</code>.</caption>
<thead><tr class="header">
<th align="left">territories</th>
<th align="left">period</th>
<th align="left">soybean</th>
<th align="left"></th>
<th align="left">maize</th>
<th align="left"></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="left">harvested</td>
<td align="left">production</td>
<td align="left">harvested</td>
<td align="left">production</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">1111</td>
<td align="left">1112</td>
<td align="left">1121</td>
<td align="left">1122</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">1211</td>
<td align="left">1212</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="even">
<td align="left">unit 2</td>
<td align="left">year 1</td>
<td align="left">2111</td>
<td align="left">2112</td>
<td align="left">2112</td>
<td align="left">2122</td>
</tr>
<tr class="odd">
<td align="left">unit 2</td>
<td align="left">year 2</td>
<td align="left">2211</td>
<td align="left">2212</td>
<td align="left">2121</td>
<td align="left">2222</td>
</tr>
<tr class="even">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="ot">NULL</span>, <span class="dt">left =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">            <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">            <span class="dt">year =</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"period"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">            <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">                   <span class="dt">row =</span> <span class="dv">1</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">5</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">            <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">                   <span class="dt">row =</span> <span class="dv">2</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">5</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>),</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">            <span class="dt">production =</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">                   <span class="dt">row =</span> <span class="dv">2</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">4</span>, <span class="dv">6</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>)))</a></code></pre></div>
<p>In case several variables are nested within other variables, we have to specify all wide variables and in which rows they sit.</p>
<table class="table">
<caption>Table 5: The identifying variable <code>commodities</code> is nested in the identifying variable <code>period</code>. The target variable is spread across those nested columns.</caption>
<colgroup>
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">territories</th>
<th align="left">year 1</th>
<th align="left"></th>
<th align="left"></th>
<th align="left"></th>
<th align="left">year 2</th>
<th align="left"></th>
<th align="left"></th>
<th align="left"></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left">soybean</td>
<td align="left"></td>
<td align="left">maize</td>
<td align="left"></td>
<td align="left">soybean</td>
<td align="left"></td>
<td align="left">maize</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">harvested</td>
<td align="left">production</td>
<td align="left">harvested</td>
<td align="left">production</td>
<td align="left">harvested</td>
<td align="left">production</td>
<td align="left">harvested</td>
<td align="left">production</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">1111</td>
<td align="left">1112</td>
<td align="left">1121</td>
<td align="left">1122</td>
<td align="left">1211</td>
<td align="left">1212</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="even">
<td align="left">unit 2</td>
<td align="left">2111</td>
<td align="left">2211</td>
<td align="left">2121</td>
<td align="left">2221</td>
<td align="left">2112</td>
<td align="left">2212</td>
<td align="left">2122</td>
<td align="left">2222</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="ot">NULL</span>, <span class="dt">left =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">            <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">            <span class="dt">year =</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"period"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">                   <span class="dt">row =</span> <span class="dv">1</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">6</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">            <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">                   <span class="dt">row =</span> <span class="dv">2</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">            <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">                   <span class="dt">row =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>),</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">            <span class="dt">production =</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-20" data-line-number="20">                   <span class="dt">row =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>)))</a></code></pre></div>
</div>
<div id="listed-values-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#listed-values-variables" class="anchor"></a>Listed values variables</h3>
<p>Some tables contain a column where the names of values variables are treated as if they were an identifying variable (<code>harvested</code> and <code>production</code>), while the values are presented in only one column (<code>values</code>) (Tab. 6). To end up with tidy data in those cases, we need to extract the values associated with the values variables. Thus, we define a new column for each of the values varaibles and specify the <code>key =</code> in which the variable names sit, and the <code>value =</code> the variable name has, to extract that variable.</p>
<table class="table">
<caption>Table 6: The variable names of the target variable are treated as if they were an identifying variable.</caption>
<thead><tr class="header">
<th align="left">territories</th>
<th align="left">period</th>
<th align="left">commodities</th>
<th align="left">dimension</th>
<th align="left">values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">soybean</td>
<td align="left">harvested</td>
<td align="left">1111</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">maize</td>
<td align="left">harvested</td>
<td align="left">1121</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">soybean</td>
<td align="left">production</td>
<td align="left">1112</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">maize</td>
<td align="left">production</td>
<td align="left">1122</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">soybean</td>
<td align="left">harvested</td>
<td align="left">1211</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">maize</td>
<td align="left">harvested</td>
<td align="left">1221</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">soybean</td>
<td align="left">production</td>
<td align="left">1212</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">maize</td>
<td align="left">production</td>
<td align="left">1222</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="ot">NULL</span>, <span class="dt">left =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">            <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">            <span class="dt">year =</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"period"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">            <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">3</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">            <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">5</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">                   <span class="dt">key =</span> <span class="st">"dimension"</span>, <span class="dt">value =</span> <span class="st">"harvested"</span>),</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">            <span class="dt">production =</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">5</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">                   <span class="dt">key =</span> <span class="st">"dimension"</span>, <span class="dt">value =</span> <span class="st">"production"</span>)))</a></code></pre></div>
<p>Moreover, (several) identifying variables may be wide and we have to proceed as mentioned above, by providing the row and columns of the wide identifying variables.</p>
<table class="table">
<caption>Table 7: The identifying variable <code>commodities</code> is treated as if it were the observed variable.</caption>
<thead><tr class="header">
<th align="left">territories</th>
<th align="left">period</th>
<th align="left">dimension</th>
<th align="left">soybean</th>
<th align="left">maize</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">harvested</td>
<td align="left">1111</td>
<td align="left">1112</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">production</td>
<td align="left">1121</td>
<td align="left">1122</td>
</tr>
<tr class="odd">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">harvested</td>
<td align="left">1211</td>
<td align="left">1212</td>
</tr>
<tr class="even">
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">production</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="ot">NULL</span>, <span class="dt">left =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">            <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">            <span class="dt">year =</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"period"</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">            <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">                   <span class="dt">row =</span> <span class="dv">1</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">4</span>, <span class="dv">5</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">            <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">4</span>, <span class="dv">5</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">                   <span class="dt">key =</span> <span class="st">"dimension"</span>, <span class="dt">value =</span> <span class="st">"harvested"</span>),</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">            <span class="dt">production =</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">4</span>, <span class="dv">5</span>), <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb8-21" data-line-number="21">                   <span class="dt">key =</span> <span class="st">"dimension"</span>, <span class="dt">value =</span> <span class="st">"production"</span>)))</a></code></pre></div>
<p>An even more complicated case of listed values variables is present in a clustered table that is arranged according to the values variables. Here, we need to specify first of all in <code>clusters</code> <code>"id = "values"</code> to indicate that the values variable is the cluster ID. Next, we need to set up the values variables so that they contain <code>"key = "cluster"</code> and in <code>value</code> the number of the cluster this variable can be found in. Moreover, we provide the column(s) and all rows that contain the values of each values variable. This is in contrast to nested values variables, where the rows of the variable names need to be provided.</p>
<table class="table">
<caption>Table 8: Vertical clusters of the values variables.</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">territories</th>
<th align="left">period</th>
<th align="left">commodities</th>
<th align="left">values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">harvested</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">soybean</td>
<td align="left">1111</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">maize</td>
<td align="left">1121</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">soybean</td>
<td align="left">1211</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">maize</td>
<td align="left">1221</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">production</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">soybean</td>
<td align="left">1112</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 1</td>
<td align="left">maize</td>
<td align="left">1122</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">soybean</td>
<td align="left">1212</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">unit 1</td>
<td align="left">year 2</td>
<td align="left">maize</td>
<td align="left">1222</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">    <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">           <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">12</span>), <span class="dt">left =</span> <span class="dv">2</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">                <span class="dt">id =</span> <span class="st">"values"</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">         <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">           <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">                  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">                       <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">                <span class="dt">year =</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">                  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">                       <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">3</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">                <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">                  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">                       <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">4</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">                <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15">                  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">                       <span class="dt">row =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">10</span>), <span class="dt">col =</span> <span class="dv">5</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb9-17" data-line-number="17">                       <span class="dt">key =</span> <span class="st">"cluster"</span>, <span class="dt">value =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">                <span class="dt">production =</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19">                  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">                       <span class="dt">row =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">13</span><span class="op">:</span><span class="dv">20</span>), <span class="dt">col =</span> <span class="dv">5</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">                       <span class="dt">key =</span> <span class="st">"cluster"</span>, <span class="dt">value =</span> <span class="dv">2</span>)))</a></code></pre></div>
</div>
<div id="several-variables-in-one-column" class="section level3">
<h3 class="hasAnchor">
<a href="#several-variables-in-one-column" class="anchor"></a>Several variables in one column</h3>
<p>Sometimes it may even be the case that several information/variables are stored in the same column, for example when a territorial unit is given together with its parent (e.g. <code>unit1, year1</code>). In those cases, the resulting variables need to be specified so that they point to that same column but extract information via a regular expression. For example, <code>.+?(?=,)</code> gives everything up until the first comma and <code>(?&lt;=\s).*</code> everything after the white-space.</p>
<table class="table">
<caption>Table 9: Several variables are stored in the same column.</caption>
<thead><tr class="header">
<th align="left">unit</th>
<th align="left">commodities</th>
<th align="left">harvested</th>
<th align="left">production</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">unit 1, year 1</td>
<td align="left">soybean</td>
<td align="left">1111</td>
<td align="left">1112</td>
</tr>
<tr class="even">
<td align="left">unit 1, year 1</td>
<td align="left">maize</td>
<td align="left">1121</td>
<td align="left">1122</td>
</tr>
<tr class="odd">
<td align="left">unit 1, year 2</td>
<td align="left">soybean</td>
<td align="left">1211</td>
<td align="left">1212</td>
</tr>
<tr class="even">
<td align="left">unit 1, year 2</td>
<td align="left">maize</td>
<td align="left">1221</td>
<td align="left">1222</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">clusters =</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">top =</span> <span class="ot">NULL</span>, <span class="dt">left =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">            <span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">     <span class="dt">variables =</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">       <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">territories =</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">            <span class="dt">year =</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="st">"period"</span>, <span class="dt">split =</span> <span class="st">".+?(?=_)"</span>,</a>
<a class="sourceLine" id="cb10-10" data-line-number="10">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">            <span class="dt">commodities =</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"id"</span>, <span class="dt">name =</span> <span class="ot">NULL</span>, <span class="dt">split =</span> <span class="st">"(?&lt;=</span><span class="ch">\\</span><span class="st">_).*"</span>,</a>
<a class="sourceLine" id="cb10-13" data-line-number="13">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">            <span class="dt">harvested =</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"ha"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">3</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb10-17" data-line-number="17">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>),</a>
<a class="sourceLine" id="cb10-18" data-line-number="18">            <span class="dt">production =</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19">              <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">type =</span> <span class="st">"values"</span>, <span class="dt">unit =</span> <span class="st">"t"</span>, <span class="dt">factor =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb10-20" data-line-number="20">                   <span class="dt">row =</span> <span class="ot">NULL</span>, <span class="dt">col =</span> <span class="dv">4</span>, <span class="dt">rel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb10-21" data-line-number="21">                   <span class="dt">key =</span> <span class="ot">NULL</span>, <span class="dt">value =</span> <span class="ot">NULL</span>)))</a></code></pre></div>
</div>
</div>
</div>
<div id="setting-up-schema-descriptions" class="section level1">
<h1 class="hasAnchor">
<a href="#setting-up-schema-descriptions" class="anchor"></a>Setting up schema descriptions</h1>
<p>To set up a schema description, the recommended strategy is the following:</p>
<ol style="list-style-type: decimal">
<li><p>Clarify which are the identifying variables and which are the values variables and create a new entry in the schema. A variable is always a combination of <strong>name</strong> and <strong>values</strong>. Names are typically the column names, but in many disorganised messy tables that would not be where a variable name is found. Values are typically in the column below that name, but in tables with nested headers the values are mostly not in a column with their name. Think, <em>do the values of the variable identify some unit, or do they contain the measured values?</em></p></li>
<li><p>Determine whether there are clusters and find the origin (top left cell) of each cluster (Tabs. 1 &amp; Tab. 2). Follow the next steps for each cluster…</p></li>
<li><p>Determine which variable is the “key” of clusters and provide that as cluster ID. In case the key is an identifying variable, provide this variables’ name and if it’s a values variable, provide simply <code>"values"</code> as cluster ID. Think <em>which variable is split up into clusters?</em></p></li>
<li><p>Determine for each identifying variable the following:</p></li>
</ol>
<ul>
<li>are all values of this variable in one column (think: <em>is it “long”?</em>) or are they in several columns?</li>
<li>in case the variable is not long, determine the row and columns in which its names sit (Tab. 5).</li>
<li>in case the variable is long, determine whether it must be split off of another column (Tab. 9).</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Determine for each values variables the following:</li>
</ol>
<ul>
<li>all columns in which the values of the variable sit (Tab. 6).</li>
<li>the unit and conversion factor.</li>
<li>in case the variable is not tidy, one of the three following cases should apply:
<ul>
<li>in case the variable is nested in a wide identifying variable, determine additionally to the columns in which the values sit also the rows in which the <strong>variable name</strong> sits (Tab. 4 &amp; Tab. 5).</li>
<li>in case the names of the variable are given as an identifying variable (Tab. 6), give that column name as <code>key</code> of the values variable, together with the respective term (<code>values</code>) of the values variables (this indicates that this <em>key-values pair</em> must be spread).</li>
<li>in case the names of the variable are the names of clusters, specify <code>key = "cluster"</code>, in <code>values</code> the cluster number the variable refers to (Tab. 8).</li>
</ul>
</li>
</ul>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Codd1990">
<p>Codd, EF. 1990. <em>The Relational Model for Database Management: Version 2</em>. Boston, MA, USA: Addison-Wesley Longman Publishing Co., Inc.</p>
</div>
<div id="ref-Wickham2014">
<p>Wickham, Hadley. 2014. “Tidy Data.” <em>Journal of Statistical Software</em> 59 (10). Foundation for Open Access Statistics: 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#definitions">Definitions</a></li>
      <li>
<a href="#table-types">Table types</a><ul class="nav nav-pills nav-stacked">
<li><a href="#spreadsheet-contains-several-clusters">Spreadsheet contains (several) clusters</a></li>
      <li><a href="#spreadsheet-contains-one-table">Spreadsheet contains one table</a></li>
      </ul>
</li>
      <li><a href="#setting-up-schema-descriptions">Setting up schema descriptions</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://orcid.org/0000-0002-2958-0796">Steffen Ehrmann</a>, Arne Rümmler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
